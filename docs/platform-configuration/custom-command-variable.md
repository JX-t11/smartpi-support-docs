---
title: 自定义命令词变量配置
icon: material/cog
description: 智能公元平台自定义命令词的变量命名规则与类型选择
---

# 自定义命令词变量配置

## 问题描述

在配置自定义命令词时，对变量名的命名规则和变量类型的选择存在疑问，特别是如何正确填写变量名和选择合适的类型。

## 解决方案

### 1. 变量命名规则

变量名必须满足C语言变量名规则：

- 只能包含字母（a-z, A-Z）、数字（0-9）和下划线（_）
- 必须以字母或下划线开头，不能以数字开头
- 区分大小写（如：LED与led是不同的变量）
- 不能使用C语言关键字（如：int、char、if、for等）
- 建议使用有意义的命名，如：led_state、motor_speed、door_status

### 2. 变量类型选择

根据存储的数据类型选择合适的变量类型：

| 类型 | 说明 | 使用场景 |
|------|------|----------|
| int | 整数 | 计数器、状态标识（0/1）、温度值等 |
| char | 字符 | 单个字符标识、简单状态等 |
| double | 双精度浮点数 | 精确数值、小数等 |
| unsigned char | 无符号字符 | 0-255范围的数值、PWM值等 |

### 3. 行为与变量的关系

在基础信息页面看到的"行为"列（如on1、off1、on2、off2）是预设的行为标识符，不是变量名。这些行为标识符用于：

- on1/on2：通常表示开启动作
- off1/off2：通常表示关闭动作
- 可以与定义的变量配合使用，实现状态控制

### 4. 配置步骤

1. **定义变量**：

    - 进入"变量定义"页面
    - 点击添加变量
    - 输入符合规范的变量名
    - 选择合适的数据类型
    - 设置默认值（可选）

2. **关联行为**：

    - 在"基础信息"页面配置命令词
    - 为每个命令词选择对应的行为
    - 通过变量设置来控制具体动作

3. **使用变量**：

    - 在控制详情中引用定义的变量
    - 设置变量的值或操作方式
    - 实现命令词与变量的联动

## 注意事项

- 变量一旦定义，其类型不可修改，如需修改需删除后重新创建
- 变量名在同一个项目中必须唯一
- 建议在定义变量时添加备注，说明变量的用途
- 合理使用变量可以有效减少重复的命令词配置

![变量定义界面](./img/custom-command-variable-definition.png)
![基础信息配置](./img/custom-command-behavior.png)