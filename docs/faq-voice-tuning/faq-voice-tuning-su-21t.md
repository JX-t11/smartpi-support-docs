# SU-21T 语音调优 FAQ

本页用于整理 SU-21T 相关的语音调优问题。

### SU-21T上电后对命令词无响应且无控制输出怎么办？

**问题描述：**

SU-21T芯片上电后无法对命令词做出回复，也没有任何控制响应。

**解决方案：**

**1. 基础功能验证**

- 检查模块上电是否有开机播报
- 确认喇叭和麦克风连接正确
- 验证使用的麦克风和喇叭为配套型号

**2. 模块单独测试**

- 将模块从板子上拆下单独测试
- 排除外围电路干扰的可能性
- 确认模块本身功能是否正常

**3. 麦克风电路检查**

- 检查麦克风外围电路设计
- 确认麦克风供电和偏置电路
- 验证信号路径无干扰

**4. 配置验证**

- 确认已设置回复词功能
- 检查命令词配置是否正确
- 验证固件已成功烧录

**注意事项：**

- 在自制板子上测试前，建议先用模块单独验证
- 麦克风电路对语音识别效果影响很大
- 使用非配套的麦克风喇叭可能导致异常

---

### SU-21T如何进入睡眠模式？

**问题描述：**

咨询SU-21T芯片如何进入睡眠模式，以及低功耗模式是否通过休眠实现。

**解决方案：**

**睡眠模式说明：**

SU-21T系列芯片支持低功耗睡眠模式，通过以下方式实现：

1. **自动睡眠机制**：

    - 无语音输入时自动进入睡眠
    - 检测到声音时自动唤醒
    - 音量变化可作为唤醒条件

2. **低功耗实现方式**：

    - 确实通过休眠实现低功耗
    - 睡眠时功耗极低（μA级）
    - 唤醒后恢复正常工作模式

**进入睡眠的条件：**

1. **时间条件**：

    - 一段时间无语音输入
    - 默认超时时间可配置
    - 典型值为10-30秒

2. **环境条件**：

    - 环境安静无声音
    - 无唤醒词输入
    - 无串口指令触发

3. **配置条件**：

    - 需要在固件中启用睡眠功能
    - 配置睡眠触发条件
    - 设置唤醒阈值

**唤醒机制：**

1. **声音唤醒**：

    - 检测到声音超过阈值
    - 识别唤醒词后完全唤醒
    - 唤醒时间<100ms

2. **IO电平变化**：

    - 休眠时IO可能保持特定电平
    - 音量变化触发唤醒后IO状态改变
    - 可通过外部信号唤醒

3. **串口唤醒**：

    - 通过串口发送唤醒指令
    - 适合需要精确控制的场景
    - 唤醒后立即响应

**睡眠特性：**

1. **功耗表现**：

    - 正常工作：约10-20mA
    - 睡眠模式：<1mA（典型值100μA）
    - 唤醒瞬间：短暂电流峰值

2. **功能限制**：

    - 睡眠时语音识别暂停
    - GPIO输出保持最后状态
    - 串口通信暂停

3. **恢复时间**：

    - 从睡眠到唤醒：<50ms
    - 完全启动语音识别：<200ms
    - 响应语音指令：<300ms

**配置方法：**

**平台配置方式：**

1. **启用睡眠功能**：

    - 在平台中勾选"启用低功耗"
    - 设置无操作超时时间
    - 配置唤醒灵敏度

2. **IO状态设置**：

    - 定义睡眠时的IO电平
    - 配置唤醒后的IO行为
    - 设置IO唤醒条件

3. **唤醒词优化**：

    - 选择合适的唤醒词
    - 调整识别阈值
    - 测试不同环境下的唤醒率

**技术细节：**

1. **睡眠深度**：

    - 支持浅度睡眠（保留部分功能）
    - 支持深度睡眠（最大省电）
    - 可根据需求选择

2. **唤醒源配置**：

    - 唤醒源可以组合使用
    - 支持优先级设置
    - 可动态调整

3. **状态指示**：

    - 可通过LED指示睡眠状态
    - 串口输出状态信息
    - 便于调试和监控

**应用建议：**

1. **电池供电设备**：

    - 必须启用睡眠模式
    - 合理设置唤醒条件
    - 优化功耗管理

2. **Always-on设备**：

    - 可选择性禁用睡眠
    - 保持即时响应
    - 牺牲功耗换取体验

3. **混合模式应用**：

    - 白天正常工作
    - 夜间进入深度睡眠
    - 定时唤醒检查

**注意事项：**

- SU-21T的低功耗确实通过休眠实现
- 休眠时IO电平状态需要特别关注
- 音量变化是有效的唤醒条件之一
- 建议根据实际应用场景配置睡眠参数

---


---

### SU-21T是否支持粤语识别？

**问题描述：**

需要了解SU-21T芯片是否支持粤语语音识别功能。

**解决方案：**

SU-21T**不支持**粤语识别。

**语种支持说明：**

- **支持的语种**：普通话（中文）
- **不支持的语言**：粤语、方言、英语等其他语言
- **识别引擎**：专门针对普通话优化

**替代方案：**

如需粤语支持，可考虑以下方案：

1. **小语种定制服务**
    - 联系厂商进行粤语模型定制
    - 需要一定的起订量要求
    - 定制周期较长

2. **使用通用语音方案**
    - 采用支持多语言的第三方语音芯片
    - 可能需要增加开发成本
    - 识别准确率可能不如专用方案

**注意事项：**

- SU-21T专注于中文普通话识别
- 方言支持需要专门的语料库和模型训练
- 选择模块时需确认目标语言是否在支持范围内

---

### SU-21T唤醒时无高电平输出怎么办？

**问题描述：**

SU-21T芯片在唤醒时未产生预期的高电平信号，导致无法正常触发外部设备。

**解决方案：**

**问题分析：**

唤醒时无高电平输出可能由以下原因导致：

1. 平台配置中未设置唤醒输出
2. GPIO引脚配置错误
3. 输出电平与实际需求不匹配

**排查步骤：**

**步骤1：检查平台配置**

1. **确认输出配置**：

    - 查看是否配置了唤醒后GPIO输出
    - 检查GPIO引脚选择是否正确
    - 确认输出电平设置（高/低）

2. **导出配置文件**：

    - 将平台配置导出为JSON文件
    - 检查GPIO相关配置项
    - 对比预期与实际配置

**步骤2：硬件验证**

1. **示波器测量**：
    ```
    测量方法：

    - 示波器探头接目标GPIO
    - 地线夹接模块GND
    - 触发唤醒词观察波形
    ```

2. **测量要点**：

    - 唤醒时刻是否有电平跳变
    - 电平幅度是否达到3.3V
    - 脉冲宽度是否足够（>10ms）

**步骤3：功能测试**

1. **使用简单配置**：

    - 仅保留唤醒和GPIO输出功能
    - 移除其他可能干扰的配置
    - 生成测试固件验证

2. **触发条件测试**：

    - 语音唤醒测试
    - 串口唤醒测试
    - GPIO唤醒测试（如支持）

**解决方案：**

**方案1：重新配置GPIO**

1. **添加唤醒输出**：
    ```
    配置步骤：

    1. 进入平台控制配置
    2. 添加事件触发：唤醒成功
    3. 设置GPIO输出：选择引脚
    4. 配置输出电平：高电平
    5. 生成并烧录新固件
    ```

2. **输出模式选择**：

    - 电平输出：持续高电平
    - 脉冲输出：固定宽度脉冲
    - 翻转输出：延时后自动翻转

**方案2：检查电路连接**

1. **连接验证**：

    - 确认GPIO与外部电路连接
    - 检查是否存在上拉/下拉
    - 验证负载阻抗合适

2. **电平匹配**：

    - SU-21T输出：3.3V CMOS
    - 外部输入：是否3.3V兼容
    - 必要时添加电平转换

**方案3：调试技巧**

1. **串口监控**：

    - 添加串口输出指令
    - 记录唤醒事件
    - 确认触发条件满足

2. **LED指示**：

    - 临时配置LED输出
    - 直观观察唤醒状态
    - 排除GPIO损坏可能

**技术细节：**

1. **GPIO输出特性**：

    - 输出类型：推挽输出
    - 驱动能力：最大10mA
    - 上升时间：<100ns

2. **唤醒时序**：
    ```
    时序图：
    唤醒检测 → 内部处理 → GPIO输出 → 延时(可选)
        10ms        50ms         <10ms
    ```

**常见问题：**

1. **无输出**：

    - 未配置输出功能
    - GPIO被其他功能占用
    - 芯片进入保护模式

2. **电平错误**：

    - 高低电平定义反了
    - 外部电路导致电平异常
    - 配置了翻转功能

**优化建议：**

1. **配置优化**：

    - 使用明确的GPIO命名
    - 添加注释说明功能
    - 保留配置截图

2. **电路设计**：

    - 添加上拉电阻（如需）
    - 使用缓冲器增强驱动
    - 考虑隔离设计

3. **测试验证**：

    - 多次测试确认稳定性
    - 不同环境下验证
    - 记录测试数据

**注意事项：**

- SU-21T的唤醒输出需要明确配置
- 默认情况下唤醒可能无GPIO动作
- 建议使用示波器验证实际输出
- 如问题持续，提供配置文件供技术支持分析

---



