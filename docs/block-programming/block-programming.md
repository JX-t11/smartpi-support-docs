---
title: Block 积木编程一体化指南
icon: material/puzzle-outline
description: 面向教学、快速 Demo 和原型验证的 Block 积木编程一体化指南。
---

# Block 积木编程一体化指南

## 1. 文档定位与适用场景

### 1.1 目标读者
- 教育培训场景中的老师与学生
- 希望快速体验语音模组能力的初学者
- 需要在 Demo、PoC 阶段验证方案的工程师
- 与 CI/SU 离线语音模组或 WiFi 联网模组做联动的产品/内容团队

### 1.2 应用场景示例
- **课堂教学**：灯光 / 蜂鸣器 / 电机控制示例，讲解“事件 → 逻辑 → 行为”
- **快速 Demo**：无需写 C 代码，语音指令触发串口、GPIO 或 HTTP 请求
- **项目原型验证**：在 Block 中验证逻辑，成熟后导出 C 代码接入 RTOS 项目
- **语音+传感器联动**：噪音监测、教室巡检、展厅交互等需要快速迭代的体验

### 1.3 与传统 C 开发的对比
- **优势**：图形化拖拽降低学习成本，逻辑结构清晰，适合教学与快速迭代
- **限制**：细粒度硬件控制、复杂算法与性能优化弱于直接写 C
- **建议流程**：原型 / 教学阶段优先使用 Block；需求复杂时导出 C 代码继续开发

### 1.4 推荐项目结构
```
project_name/
├─ block/        # 保存 .mix 工程、流程截图
├─ firmware/     # 云端或本地生成的固件
└─ docs/README   # 记录串口波特率、语音指令、技能 ID 等
```

### 1.5 多人协作
- Mixly 与智能公元平台共用账号，确保账号权限统一
- 通过网盘 / Git 管理 `.mix`、配置文件与语音技能说明
- 重要参数（串口波特率、关键词、硬件接线）写入 README，避免现场沟通成本

---

## 2. 平台与界面基础

### 2.1 在智能公元平台中的位置
- Block 是“可视化开发”入口，与智能体、小程序、语音模组共用资源
- 可通过串口或云端脚本控制 CI/SU 离线语音模组、WiFi 模组及常见外设

### 2.2 支持的模组与能力
| 模组类型 | 典型用途 | 支持能力 |
| --- | --- | --- |
| CI-03T / CI-33T 离线语音模组 | 本地语音指令控制 | 词表识别、串口命令、GPIO 控制 |
| 其他 CI/SU 系列离线模组 | 命令词控制、情景联动 | 兼容串口协议的指令下发、外设控制 |
| WiFi / 在线语音模组 | 云端联动 | HTTP/MQTT 请求、音频控制、云端脚本 |
| 传感器 / 执行器扩展板 | 教学实验 | GPIO、PWM、I2C/SPI 驱动，用于灯、按键、电机 |

> 更多板卡截图、功能概览参见官方文档：https://help.aimachip.com/docs/block

### 2.3 Mixly 2.0 界面布局
1. **菜单栏**：新建、打开、保存、板卡管理、生成固件
2. **积木分类栏**：流程控制、变量与运算、硬件外设、网络请求等
3. **积木编辑区**：拖拽积木拼接逻辑
4. **信息栏 / 控制台**：编译/上传进度、日志输出

### 2.4 核心操作流程
1. 导入对应模组板卡
2. 拖拽积木完成业务逻辑
3. 选择“上传”或“编译”生成固件（默认云端编译）
4. 将固件烧录到设备并重新上电验证

### 2.5 账号与资源协同
- Mixly 2.0 与智能公元平台共用账号密码
- 云端编译、词库同步需要账号在线；离线场景需提前申请离线编译权限
- 推荐通过 `project_name/block`、`project_name/firmware` 等目录管理文件

### 2.6 云端与本地编译对比
- **云端编译**：点击“上传”即调用官方云编译；无需安装交叉编译链，但依赖网络
- **本地编译（高级）**：离线打包工具 + SDK；适合网络受限或定制流程，建议先云端验证
- **排错**：保留日志，区分语法问题与网络/权限问题

### 2.7 常用链接
- 官方文档入口：`https://help.aimachip.com/docs/block`
- 开发环境搭建：`https://help.aimachip.com/docs/block/minxly_01`
- 串口通信示例：`https://help.aimachip.com/docs/block/ci-03t_01`
- CI03T 对接流程：`https://help.aimachip.com/docs/block/block-1f3a936php1n6`
- Mixly 官方手册（英文）：`https://mixly.org/`

---

## 3. 开发环境搭建与 Hello World

### 3.1 环境前置清单
- Windows 10/11 管理员权限 PC（避免中文/过长安装路径）
- USB 转串口驱动（CH340）及对应 COM 口确认
- Mixly 2.0 rc4 及以上版本（官方附件或社群镜像）
- Notepad++（或等效文本编辑器）用于配置文件编辑
- 智能公元平台账号（具备板卡权限）

### 3.2 下载与安装
1. 在官方文档或附件中下载 `CI-03T` 安装包，解压至无中文路径目录
2. 运行 `blockTool.exe` 或 `Mixly.exe` 前，先安装 Notepad++ 便于修改配置
3. 建议首次启动后点击“一键更新”获取最新插件及板卡（可重复执行）

![Mixly 软件一键更新示意](http://help.aimachip.com/uploads/block/images/m_719cceb66e334faf6a455f284cf52eeb_r.png)

### 3.3 配置账号信息
1. 定位至 `ci03t/build/blockTool.exe.config`
2. 使用 Notepad++ 打开并搜索 `UserName`、`Password`
3. 将值修改为真实的智能公元账号/密码，仅改双引号内容

![配置文件示例1](http://help.aimachip.com/uploads/block/images/m_c03cd9b0b5b77edd879b195e139f280c_r.png)

### 3.4 更新软件与导入板卡
1. 在 Mixly 中依次执行：工具 → 一键更新
2. 打开板卡管理，导入 CI-03T/CI-33T 等板卡库
3. 在右上角板卡选择列表中确认目标板卡已加载

![导入板卡菜单](http://help.aimachip.com/uploads/block/images/m_c65d91e5846fcbdf3c881d84eb391af9_r.png)

### 3.5 硬件连接（以 CI-03T + CH340 为例）
- 模组 **TX →** CH340 **RX**
- 模组 **RX →** CH340 **TX**
- **GND ↔ GND**，**5V/3.3V** 供电保持一致
- 上电前确认 GND 共地、TX/RX 交叉

![硬件连接示意](http://help.aimachip.com/uploads/block/images/m_f6449a06986d9dd5cabb8bb452258ee8_r.png)

### 3.6 第一个程序（Hello World）
1. 在“程序初始化”积木中加入“串口发送”或“点亮板载 LED”积木
2. 点击“上传”触发云端编译，平均耗时约 3 分钟
3. 上传成功提示出现后，**重新上电** 模组，确认串口打印或 LED 状态

![编译生成提示](http://help.aimachip.com/uploads/block/images/m_f7104bb76f16f28ad1572ba7fb0acaad_r.png)

### 3.7 常见失误（来自章节文档经验）
- 串口选择或波特率不匹配（CI-03T 默认 115200，示例中可 9600）
- 未配置编译器路径或缓存异常 → 重新执行一键更新
- 变量未初始化导致逻辑跳变 → 在“程序开始”中统一赋值
- 未重新上电导致新固件未运行

### 3.8 资料与日志整理建议
- 将 Mixly 输出的编译日志保存到 `logs/`，失败时快速定位
- 保存硬件接线示意与串口截图，方便教学复现
- 在 README 中记录固件版本号、关联技能 ID、最近一次成功编译时间

---

## 4. 常用积木指令与扩展

### 4.1 流程控制积木
- 顺序执行、条件（如果…否则）、循环（重复 N 次、条件循环）
- 适用：语音事件触发不同分支、定期轮询传感器

### 4.2 变量与运算积木
- 数值 / 文本 / 布尔变量管理状态
- 支持基础算术与比较，用于计数、模式切换、状态锁

### 4.3 硬件控制积木
| 分类 | 用法 | 注意事项 |
| --- | --- | --- |
| 数字输出 | 控制引脚高低电平（LED、继电器） | 校准引脚映射，避免冲突 |
| PWM 输出 | 调节亮度或电机速度 | 设置频率/占空比，避免过载 |
| 输入检测 | 读取按键、传感器、电位器 | 需要下拉/上拉配置 |

### 4.4 串口通信积木
- 初始化串口并设置波特率（常用 9600 / 115200）
- 发送字符串 / 数字给外部 MCU
- 接收外部数据并根据字符串判断执行

### 4.5 语音与扩展能力
- 通过“自定义语音指令”处理 CI/SU 模组回调，实现语音触发逻辑
- “HTTP 请求”积木可将识别结果上报云端
- 利用“扩展库”启用隐藏积木（网络、文件系统等），路径：扩展 → 管理库

---

## 5. 示例项目与实战

### 5.1 CI-03T 与 Arduino 串口通信
**硬件连接**
- CI-03T TX → Arduino RX
- CI-03T RX → Arduino TX
- GND ↔ GND

**Block 逻辑**
1. 初始化串口（波特率 9600 或与 Arduino 同步）
2. 语音识别“打开空调” → 串口发送 `AC_ON`
3. 语音识别“关闭空调” → 串口发送 `AC_OFF`

**Arduino 逻辑**
```
void setup() {
  Serial.begin(9600);
  pinMode(13, OUTPUT);
}

void loop() {
  if (Serial.available()) {
    String cmd = Serial.readString();
    if (cmd == "AC_ON") {
      digitalWrite(13, HIGH);
    } else if (cmd == "AC_OFF") {
      digitalWrite(13, LOW);
    }
  }
}
```

**验证**：对模组说“打开空调”，观察 Arduino LED；串口助手可查看原始数据。官方附件示例：`https://help.aimachip.com/attach_files/block/523`

### 5.2 语音驱动多模式课堂指示灯（CI-33T）
1. 定义 `mode` 变量，初始 `"idle"`
2. 语音指令：
   - “开始上课” → `mode="class"`，点亮绿色 LED，串口打印 `CLASS_MODE`
   - “进入讨论” → `mode="discussion"`，点亮黄色 LED，串口打印 `DISCUSSION_MODE`
   - “自由自习” → `mode="self"`，点亮蓝色 LED，串口打印 `SELF_MODE`
3. 主循环中根据 `mode` 刷新灯光，确保同一时刻只有一个模式生效
4. 可扩展：串口同步给教室主机或触发空调/窗帘

### 5.3 课堂点名案例（章节文档扩展）
- 使用数组存储姓名，结合随机数积木实现点名
- 结合语音播报或蜂鸣器反馈结果，可扩展为计分系统
- 通过状态机区分“点名”“统计”“公示”阶段，减少嵌套

### 5.4 进一步联动思路
- 串口打印关键日志，配合 PC 串口助手调试
- 语音 + 传感器联动：噪音超限触发提示语或 HTTP 请求
- 结合 HTTP/MQTT 积木，将课堂状态同步至物联网平台

---

## 6. 进阶技巧与逻辑设计

### 6.1 状态机思路
- 用变量记录设备状态（如 `status = 1` 表示运行）
- 在语音/串口事件中先判断状态再执行动作，避免重复触发

### 6.2 调试技巧
- 在关键节点插入“串口打印”积木
- 分步验证：先看语音识别 → 再看串口收发 → 最后联调外设
- 通过条件断点积木（布尔变量）隔离问题区域

### 6.3 自定义语音指令与词库管理
1. 在智能公元平台技能管理中新建或复制技能
2. 配置唤醒词 → 意图 → 语料，保证与 Block 程序判断一致
3. 发布技能后在 Mixly 中点击“同步词库”或重新上传固件
4. 为不同班级/实验维护独立技能版本，并在工程备注技能 ID

### 6.4 结构化逻辑模板
- 将常用流程封装成“函数/自定义模块”积木，如 `initHardware()`、`handleSerial()`
- 语音、串口、传感器可以放在独立“永远执行”循环中，通过变量或队列通信

### 6.5 版本控制与质检
- 通过 Git/SVN 管理 `.mix`、固件与配置文件
- 每次提交流程：更新板卡 → 编译 → 烧录 → 串口截图归档
- 参考章节文档中的质检流程：“串口打印示例 + CI-03T 串口控制”走查全链路

---

## 7. 常见问题（FAQ）

- **上传卡住或报错**：检查 `blockTool.exe.config` 账号密码、网络、重新启动 Mixly
- **烧录完成设备无反应**：务必重新上电或重启设备
- **串口接收不到数据**：TX/RX 是否交叉、波特率是否一致、串口号是否占用
- **语音指令无法识别**：确认技能已发布并同步词库、固件为最新版本、麦克风/供电正常
- **提示“板卡不存在”或“权限不足”**：重新执行一键更新、确认账号权限
- **找不到积木指令**：在“扩展/管理库”启用对应插件
- **生成固件提示磁盘空间不足或路径错误**：确保磁盘空间充足、安装路径避免中文/过长目录，必要时清理缓存
- **多教室部署效率低**：提前制作 U 盘安装包，现场仅修改账号密码并导入固件

---

## 8. 更新记录与附加资源

### 8.1 更新记录
| 日期 | 版本 | 主要改动 | 适用平台 |
| --- | --- | --- | --- |
| 2025-11-20 | v2.0 | 合并指南与章节文档，补充官方参考链接与案例 | Mixly 2.0 rc4+ / 智能公元平台 |
| 2023-10-xx | v1.0 | 初版文档，覆盖 API 更新 | Mixly 2.0 / 智能公元平台 |

### 8.2 附加资源
- Mixly 官方用户手册（英文）：https://mixly.org/
- 智能公元平台技能开发教程：http://help.aimachip.com/
- 官方 Block 文档合集：https://help.aimachip.com/docs/block
- Arduino 串口控制示例仓库（社区资源）：https://github.com/
- 官方社群（QQ/微信群）：用于获取题库、教材 PPT 与答疑
