# CI-96Z 平台与固件 FAQ

本页用于整理 CI-96Z 相关的平台与固件问题。

### CI-96Z如何通过语音指令发送串口数据包？

**问题描述：**

需要实现当识别到"开灯"或"关灯"等语音指令时，通过串口发送固定的数据包，供其他单片机解析并控制外设。

**解决方案：**

**1. 配置串口引脚**

1. **Pin脚配置**：

    - 在平台进入Pin脚配置页面
    - 选择两个GPIO引脚配置为UART功能
    - 例如：PA15配置为UART1_TX，PA16配置为UART1_RX

2. **串口参数设置**：

    - 波特率：9600（或根据需求调整）
    - 数据位：8
    - 停止位：1
    - 校验位：无

**2. 配置语音指令和串口输出**

1. **添加"开灯"命令**：

    - 命令词：设置"开灯"
    - 添加控制动作：端口输出
    - 控制类型：UART1_TX
    - 动作：发送
    - 参数：设置开灯数据包（如 AA BB 01 00 CC DD）

2. **添加"关灯"命令**：

    - 命令词：设置"关灯"
    - 添加控制动作：端口输出
    - 控制类型：UART1_TX
    - 动作：发送
    - 参数：设置关灯数据包（如 AA BB 00 00 CC DD）

**3. 数据包格式设计**

```
数据包格式：
AA BB [命令] [数据] CC DD

- AA BB：固定帧头
- [命令]：命令标识（01=开灯，00=关灯）
- [数据]：附加数据（如亮度值）
- CC DD：固定帧尾
```

**4. 单片机端解析示例**

```c
// 单片机接收解析代码
void parse_uart_data() {
    if (uart_buffer[0] == 0xAA && uart_buffer[1] == 0xBB) {
        switch(uart_buffer[2]) {
            case 0x01:  // 开灯命令
                turn_on_light();
                break;
            case 0x00:  // 关灯命令
                turn_off_light();
                break;
        }
    }
}
```

**注意事项：**

- 串口引脚配置后需重新烧录固件
- 数据包格式要与接收端约定一致
- 建议使用十六进制格式发送数据
- 可根据需要添加更多命令和数据
- 测试时使用串口调试助手验证输出

---

### CI-96Z自学习功能开启后固件生成超大如何解决？

**问题描述：**

在开启自学习功能后，仅添加三条语音词条就会提示固件生成超大，导致无法正常生成固件。

**解决方案：**

**1. 选择更小的模型**

- 在固件生成平台的模型选择界面，选择占用空间更小的模型
- 推荐使用"中文茶吧机通用Pro3(占0.5M空间)-V01048-V1"或类似小容量模型
- 该模型相比通用Pro模型可节省约0.1M空间

![模型选择界面](./img/5c5b1496.jpg)

**2. 使用组合播报功能**

当需要播报多个词语时，使用组合播报可以节省固件空间：

- 进入"添加控制"配置界面
- 设置行为：选择需要触发的动作
- 控制方式：选择"播报"
- 在播报内容中添加多个语音内容（如"好的"、"已经"、"调暗"）
- 可选择是否延时输出和打断播报设置

![组合播报配置界面](./img/9447ff17.jpg)

**注意事项：**

- 开启自学习功能会显著增加固件大小，建议尽量使用小模型
- 组合播报可以将多个短词语合并为一个播报动作，有效节省空间
- 如仍提示固件超大，考虑减少词条数量或关闭部分高级功能
- 选择模型时要根据实际应用场景，在功能和空间占用间找到平衡

### CI-96Z62应选择哪个产品系列？

**问题描述：**

使用串口升级工具时，CI-96Z62芯片在"其他产品"中可以选择，但不确定"系列"选项应选择哪个。

**解决方案：**

**正确选择：**

- **产品类型**：其他产品 → CI-96Z62
- **系列选择**：CI13LC系列

![串口升级工具界面](./img/c44f891e.jpg)

*串口升级工具中CI-96Z62的正确选择*

**选择依据：**

- **CI-96Z62** 属于 CI13LC 系列产品
- 该系列基于 CI1303 芯片平台
- 支持离线语音识别功能
- 适用于需要高性能语音处理的应用

**注意事项：**

- 选择错误的系列可能导致固件不兼容
- 确认芯片型号后再进行固件升级
- 如不确定可查看芯片表面丝印
- 建议保留原固件作为备份

### 如何确认金手指语音模块的型号？

**问题描述：**

收到金手指语音模块后，需要确认是否为C1系列以及具体型号信息。

**解决方案：**

**1. 标签信息识别**

- 查看产品标签上的完整信息
- 确认"金手指语音模块-无小程序"标识
- 核对规格型号CI-96Z61

**2. 型号对应关系**

- CI-96Z61对应C1系列
- 基于CI13161芯片
- 无小程序功能版本

**3. 订单管理**

- 根据实际需求调整订单数量
- 可优先使用现有库存
- 后续按需安排生产

**注意事项：**

- 金手指模块需注意焊接工艺
- 确认与现有方案的兼容性
- 保留标签信息便于追溯
- 如有疑问及时与供应商确认

---

