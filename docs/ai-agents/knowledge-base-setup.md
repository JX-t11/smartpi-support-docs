---
title: 知识库配置指南
icon: lucide/database
description: 智能体知识库文件解析、Q&A格式配置及常见问题解决方法
---

# 知识库配置指南

## 智能体回答错误处理

### 模型知识不足导致回答错误

**问题描述：**

智能体对特定企业或专业领域的问题回答错误，如企业基本信息、产品参数等，原因是模型本身的知识储备不够新或不够专业。

**解决方案：**

1. **使用知识库补充专业信息**：

    - 将企业信息、产品资料等添加到知识库
    - 确保知识库文件解析完成并关联到智能体
    - 通过Q&A格式精确配置关键信息

2. **启用网络搜索功能**：

    - 使用带网络搜索能力的智能体
    - 搜索"帮我搜一下[企业名]"获取最新信息
    - 结合网络搜索结果提供准确答案

3. **平台迁移方案**：

    - 当前平台知识库功能可能存在稳定性问题
    - 可使用扣子平台配置智能体和知识库
    - 新平台配置完成后可直接迁移到新的智能体平台

**注意事项：**

- 小模型的知识更新相对滞后，建议优先通过知识库补充
- 网络搜索需要设备保持联网状态
- 平台迁移前建议备份现有配置数据

## 文件解析问题与解决

### 文件解析失败或速度慢

**问题描述：**

上传到知识库的文件显示"解析中"状态，进度极慢（如0.22%、0.64%），长时间无法完成解析。

**解决方案：**

1. **检查文件大小和格式**：

    - 几十MB的大文件容易出现解析失败
    - 建议将大文件拆分成多个小文件
    - 支持的格式：PDF、Word、TXT、MD等

2. **优化文件内容**：

    - 清除文件中的特殊字符和格式
    - 简化复杂的排版结构
    - 确保文本内容清晰可读

3. **分批上传处理**：

    - 避免同时上传多个大文件
    - 逐个上传并等待解析完成
    - 选择非高峰时段进行操作

4. **解析卡住的处理**：

    - 其他用户卡住可能导致队列阻塞
    - 建议更换平台或等待系统恢复
    - 考虑使用扣子等替代平台

**注意事项：**

- 解析时间与文件大小成正比
- 网络状况会影响解析速度
- 建议在平台稳定期进行操作
- 平台维护期间可能影响解析服务

## Q&A格式配置

### Q&A格式说明

当普通切片方式无法准确分割内容时，推荐使用Q&A格式实现精确的知识点管理。

**支持的文件格式：**

- Excel文件（.xlsx、.xls）
- CSV/TXT文件
- JSON格式文件

**格式要求：**

#### Excel/CSV/TXT格式
- **第一列**：问题
- **第二列**：答案
- **无需表头**：直接从第一行开始填写问答内容

#### JSON格式
知识库内容支持JSON格式编写，需要按照结构化数据格式：

```json
{
  "title": "知识库标题",
  "content": [
    {
      "question": "问题内容",
      "answer": "对应答案"
    }
  ]
}
```

**示例文件：**
参考"知识库入门示例demo.md"文件，了解具体的格式要求和编写规范。

**Excel示例：**

| 问题 | 答案 |
|------|------|
| 公司全称是什么？ | 丽水金迈科智能科技有限公司 |
| 统一社会信用代码？ | 91331101MA2J0XXX |
| 公司地址在哪里？ | 浙江省丽水市莲都区XXX |

**注意事项：**

- 每行代表一个独立的问答对
- 避免在问题或答案中包含换行符
- 建议一个问题对应一个简洁明确的答案

### 多条件问题处理

**问题描述：**

需要根据不同条件返回不同答案（如血压值120以上回答偏高，120以下回答正常）。

**解决方案：**

知识库本身不支持条件判断，需要通过设置多个独立问题来实现：

1. **创建多个问题变体**：

    - "血压120以上怎么办"
    - "血压120以下正常吗"
    - "血压偏高是什么情况"

2. **分别配置答案**：

    - 每个问题对应相应的答案和建议
    - 确保答案内容准确且有用

3. **使用同义词扩展**：

    - 添加相似表达方式的问题
    - 提高匹配率和用户体验

**注意事项：**

- 知识库是基于关键词匹配的检索系统
- 不具备LLM的推理和判断能力
- 需要预先考虑所有可能的问法

## 知识库关联智能体

### 配置步骤

1. **创建知识库**：

    - 登录智能公元平台
    - 进入"智能体" → "知识库"菜单
    - 上传并配置文件，等待解析完成

2. **创建智能体**：

    - 在智能体配置界面
    - 关联已创建的知识库
    - 设置智能体名称和描述

3. **测试验证**：

    - 使用测试界面验证问答效果
    - 检查知识库搜索功能是否正常
    - 确认智能体能否正确返回答案

### 常见错误处理

**错误：知识库中未找到答案**

- 检查知识库是否关联成功
- 验证文件解析是否完成
- 尝试使用问题中的关键词搜索

**错误：返回"ERROR: 知识库名称"**

- 确认知识库名称拼写正确
- 检查知识库权限设置
- 重新绑定智能体和知识库

### 智能体网络搜索能力

**问题描述：**

当知识库中没有答案时，智能体是否会搜索网络上的答案进行回答？

**解决方案：**

是的，智能体具备网络搜索能力：

1. **网络搜索机制**：

    - 知识库匹配失败时，自动启用网络搜索
    - 搜索互联网上的相关信息
    - 结合搜索结果生成回答

2. **搜索优先级**：

    - 优先匹配知识库内容
    - 知识库无答案时搜索网络
    - 综合多个来源提供完整答案

3. **使用场景**：

    - 知识库未覆盖的问题
    - 需要最新信息的查询
    - 开放性问题的补充回答

**注意事项：**

- 网络搜索需要设备联网
- 搜索结果可能存在时效性差异
- 建议定期更新知识库减少依赖网络搜索

## 最佳实践

### 文件准备建议

1. **内容结构化**：

    - 使用清晰的标题和段落
    - 避免冗余和重复信息
    - 保持内容简洁明了

2. **问答对优化**：

    - 问题符合用户日常表达习惯
    - 答案准确且信息完整
    - 一个知识点一个问答对

3. **定期维护**：

    - 及时更新过时信息
    - 根据用户反馈补充内容
    - 清理无效或重复的问答

### 性能优化

- 控制单个文件大小在5MB以内
- 知识库条目数量适中（建议不超过1000条）
- 定期清理无用数据和过期文件

---

### 知识库文件显示"Task is queued..."超过一天怎么办？

**问题描述：**

上传到知识库的文件已超过一天，但解析进度仍显示"Task is queued..."，状态持续时间超过87391秒（约24.3小时），怀疑解析是否异常。

**问题分析：**

1. **队列阻塞现象**：

    - 任务长时间停留在队列中无法开始处理
    - 持续时间显示相同进度无变化
    - 可能是系统任务调度出现异常

2. **可能原因**：

    - 服务器资源不足，处理队列积压
    - 解析服务出现异常或故障
    - 大文件处理导致后续任务阻塞
    - 系统维护或升级影响处理能力

**解决方案：**

1. **检查文件状态**：

    - 确认文件上传是否完整
    - 验证文件大小是否符合限制要求
    - 检查文件格式是否在支持范围内

2. **重新上传处理**：

    - 删除当前卡住的文件任务
    - 将大文件拆分成多个小文件
    - 选择非高峰时段重新上传
    - 等待当前队列清空后再操作

3. **平台状态确认**：

    - 查看平台公告确认系统状态
    - 联系技术支持查询当前服务情况
    - 确认是否为已知问题正在修复

4. **替代方案**：

    - 使用Q&A格式替代大文件
    - 考虑使用扣子等其他平台
    - 先完成基础功能配置，后续再添加知识库

**操作建议：**

- 文件大小建议控制在5MB以内
- 避免同时上传多个大文件
- 上传后耐心等待，不要重复操作
- 保留文件副本，便于重新上传
- 如超过24小时无变化，说明存在异常

**注意事项：**

- "Task is queued"表示任务尚未开始解析
- 正常解析时间根据文件大小可能需要数小时
- 如超过24小时无变化，说明存在异常
- 建议记录具体时间和文件信息便于排查

---